---
// Debug page to test content loading
const url = new URL(Astro.request.url);
const langParam = url.searchParams.get('lang') || 'en';
const themeParam = url.searchParams.get('theme') || 'dark';

// Try to load content directly
let contentLoaded = false;
let errorMessage = '';
let content = null;

try {
  // Direct import to test
  if (langParam === 'en') {
    const module = await import('../content/data/en');
    content = module.default;
  } else {
    const module = await import('../content/data/zh');
    content = module.default;
  }
  contentLoaded = true;
} catch (error) {
  errorMessage = error.message;
}

// Basic theme colors
const bgColor = themeParam === 'light' ? 'bg-white' : 'bg-black';
const textColor = themeParam === 'light' ? 'text-black' : 'text-white';
---

<!DOCTYPE html>
<html lang={langParam}>
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Debug Test</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class={`${bgColor} ${textColor} p-8`}>
  <h1 class="text-3xl font-bold mb-4">Content Loading Debug</h1>

  <div class="mb-4">
    <p><strong>URL Parameters:</strong></p>
    <p>Language: {langParam}</p>
    <p>Theme: {themeParam}</p>
  </div>

  <div class="mb-4">
    <p><strong>Content Loading Status:</strong></p>
    <p>Loaded: {contentLoaded ? 'Yes ✅' : 'No ❌'}</p>
    {errorMessage && <p class="text-red-500">Error: {errorMessage}</p>}
  </div>

  {contentLoaded && content && (
    <div class="mb-4">
      <p><strong>Sample Content:</strong></p>
      <p>Navigation Logo: {content.navigation?.logo?.text || 'NOT FOUND'}</p>
      <p>Home Title: {content.pages?.home?.title || 'NOT FOUND'}</p>
      <p>Common Button Learn More: {content.common?.buttons?.learnMore || 'NOT FOUND'}</p>
    </div>
  )}

  <div class="mt-8 space-x-4">
    <a href="?lang=en&theme=dark" class="px-4 py-2 bg-blue-500 text-white rounded">EN Dark</a>
    <a href="?lang=en&theme=light" class="px-4 py-2 bg-blue-500 text-white rounded">EN Light</a>
    <a href="?lang=zh&theme=dark" class="px-4 py-2 bg-blue-500 text-white rounded">ZH Dark</a>
    <a href="?lang=zh&theme=light" class="px-4 py-2 bg-blue-500 text-white rounded">ZH Light</a>
  </div>
</body>
</html>